---
title: 🔮 소마법 프로젝트 -6 (jjal) (작성중)
date: 2020-03-11 12:03:04
category: project
draft: false
---

```toc
exclude: Table of Contents
from-heading: 1
to-heading: 5
```

# \#. Project Map

- <a href="https://small-magic-project.now.sh/" target="_blank">프로젝트 사이트</a>

- <a href="https://github.com/taenykim/small-magic-project" target="_blank">프로젝트 깃허브소스</a>

- [소마법 프로젝트 - 1 (container)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B81/)

- [소마법 프로젝트 - 2 (calculator)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B82/)

- [소마법 프로젝트 - 3 (graph)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B83/)

- [소마법 프로젝트 - 4 (crawling)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B84/)

- [소마법 프로젝트 - 5 (today)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B85/)

- [소마법 프로젝트 - 6 (jjal)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B86/)

# 0. Intro

이미지를 **업로드**하고 **수정**하고 **다운로드**하는 기능을 만들어보고 싶어서

`짤방생성기`를 한번 만들어보았다.

# 1. 레이아웃

## 1-1. 메인화면

![](./images/jjal1.png)

> 1. 어플리케이션 설명

> 2. 이미지 업로드 버튼과 다운로드 버튼

> 3. 이미지 미리보기 창 (canvas 이용)

> 4. 이미지에 삽입할 텍스트 창 (input 이용)

> 5. 텍스트 크기 조절 셀렉트박스 (select 이용)

## 1-2. 이미지 업로드 화면

![](./images/jjal2.png)

> 치명적..

## 1-3. 생성된 이미지

![](./images/jjalbang.png)

> "Hello world!"

# 2. 상태관리

```jsx
const data = useSelector(state => state.jjal)

const [text, setText] = useState(data.text || 'welcome to my page')
const [imageOn, setImageOn] = useState(data.imageOn || '')
const [imageOnWidth, setImageOnWidth] = useState(data.imageOnWidth || '')
const [imageOnHeight, setImageOnHeight] = useState(data.imageOnHeight || '')
const [downloadHref, setDownloadHref] = useState(data.downloadHref || '')
const [textFontSize, setTextFontSize] = useState('20')
```

## 2-1. 리액트 state

**리액트 hooks**를 이용해서 컴포넌트 내에서의 상태관리를 하였다.

상태변수는

> 1. `text` : 이미지에 삽입될 텍스트

> 2. `imageOn` : 업로드된 이미지

> 3. `imageOnWidth` : 업로드된 이미지 width

> 4. `imageOnHeight` : 업로드된 이미지 height

> 5. `downloadHref` : 다운로드링크

> 6. `textFontSize` : 이미지에 삽입될 텍스트 크기

## 2-2. 리덕스 store

**리덕스 hooks**를 이용했다.

contentsMenuBar에서 데이터를 저장하는 버튼을 누르면 `useDispatch`를 통해 데이터를 저장하고

`useSelector`로 저장된 데이터를 불러왔다.

# 3. 이미지 업로드

## 3-1. View

```jsx
<label htmlFor="imageLoader">이미지 업로드</label>
<input type="file" id="imageLoader" name="imageLoader" hidden onChange={handleImage} />
```

## 3-2. :apple: FileReader()

```js
const handleImage = e => {
  var reader = new FileReader()
  reader.onload = event => {
    // :star: reader가 load되면 실행
  }
  reader.readAsDataURL(e.target.files[0])
}
```

## 3-3. :apple: Image()

```js
// 위의 주석부분
reader.onload = event => {
  var img = new Image()
  img.onload = () => {
    // :star: img가 load되면 실행
  }
  img.src = event.target.result
}
```

## 3-4. 이미지 리사이징

(작성중)
