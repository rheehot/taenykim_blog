---
title: 🔮 소마법 프로젝트 -7 (avengers) (작성중)
date: 2020-03-13 19:03:45
category: project
draft: false
---

```toc
exclude: Table of Contents
from-heading: 1
to-heading: 5
```

# \#. Project Map

- <a href="https://small-magic-project.now.sh/" target="_blank">프로젝트 사이트</a> :apple:

- <a href="https://github.com/taenykim/small-magic-project" target="_blank">프로젝트 깃허브소스</a>

<br/>

> 제작노트

- [소마법 프로젝트 - 1 (container)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B81/)

- [소마법 프로젝트 - 2 (calculator)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B82/)

- [소마법 프로젝트 - 3 (graph)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B83/)

- [소마법 프로젝트 - 4 (crawling)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B84/)

- [소마법 프로젝트 - 5 (today)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B85/)

- [소마법 프로젝트 - 6 (jjal)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B86/)

- [소마법 프로젝트 - 7 (avengers)](https://taeny.dev/project/%EC%86%8C%EB%A7%88%EB%B2%95-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B87/)

# 0. Intro

드래그 앤 드랍 기능을 간단하게 구현한 어플리케이션.

`react-beautiful-dnd` 라이브러리를 사용했고, 어벤져스 캐릭터들을 컨텐츠로 사용해보았다.

# 1. 레이아웃

## 1-1. 메인화면

![](./images/avengers.png)

화면 구성은 드래그앤드랍 기능이 들어있는 상단 컨테이너와 데이터를 화면에 그려주는 하단 컨테이너, 크게 두 개로 구성하였다.

## 1-2. 컴포넌트

```jsx
<BackgroundContainer>
  <ContentsMenubar name="avengers" data={dndData} />
  <Description>Try Drag & Drop</Description>
  <TopContainer>
    <DragDropContext>
      <DndContainer>{/* 드래그앤 드랍 관련 code */}</DndContainer>
    </DragDropContext>
  </TopContainer>
  <Description>Make them friends</Description>
  <div className="mobile_description">scroll >>> </div>
  <BottomContainer>{/* 데이터 -> 뷰 code */}</BottomContainer>
</BackgroundContainer>
```

> **ContentsMenubar** : 리듀서에 데이터를 저장하거나 데이터를 리셋시킬 수 있는 메뉴바

> **Description** : 설명 (styled-component)

> **TopContainer** : 드래그앤 드랍 기능, react-beautiful-dnd 의 `DragDropContext API`를 사용했다.

> **div.mobile_description** : width가 BottomContainer 보다 작아지면 스크롤하라는 설명도 보이도록 해주었다.

> **BottomContainer** : 데이터를 화면에 그려주는 역할

# 2. 상태관리

```jsx
const data = useSelector(state => state.avengers)
const [dndData, setDndData] = useState(data)
```

## 2-1. 리액트 state

**리액트 hooks**를 이용해서 컴포넌트 내에서의 상태관리를 하였다.

그리고 드래그앤 드랍으로 데이터의 변경시, 불변성을 유지시켜주며 데이터를 바꾸어주었다.

> **dndData** : 객체형태의 현재 column, item들의 데이터

## 2-2. 리덕스 store

**리덕스 hooks**를 이용했다.

contentsMenuBar에서 데이터를 저장하는 버튼을 누르면 `useDispatch`를 통해 데이터를 저장하고

`useSelector`로 저장된 데이터를 불러왔다.

```js
// reducers > avengers.js

const initialState = {
  items: {
    'item-1': { id: 'item-1', content: 'Captain America', src: 'captain.jpg' },
    'item-2': { id: 'item-2', content: 'IonMan', src: 'ironman.jpg' },
    'item-3': { id: 'item-3', content: 'Thor', src: 'thor.jpg' },
    'item-4': { id: 'item-4', content: 'Hulk', src: 'hulk.jpg' },
    'item-5': { id: 'item-5', content: 'Spiderman', src: 'spider.jpg' },
    'item-6': { id: 'item-6', content: 'Groot', src: 'groot.jpg' },
    'item-7': { id: 'item-7', content: 'Rocket', src: 'rocket.jpg' },
    'item-8': { id: 'item-8', content: 'Thanos', src: 'thanos.png' },
  },
  columns: {
    'column-1': {
      id: 'column-1',
      title: 'Heros',
      itemIds: [
        'item-1',
        'item-2',
        'item-3',
        'item-4',
        'item-5',
        'item-6',
        'item-7',
      ],
    },
    'column-2': {
      id: 'column-2',
      title: 'villain',
      itemIds: ['item-8'],
    },
  },
  columnOrder: ['column-1', 'column-2'],
}
```

> avengers 리듀서의 초기 state

(작성중)
